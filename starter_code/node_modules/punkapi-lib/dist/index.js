'use strict';

var db = require('punkapi-db');
var uniqueRandomArray = require('unique-random-array');
var sortBy = require('lodash/sortBy');
var filters = require('./filters');
var idFilter = require('./filters/id');

var sortedDb = sortBy(db, ['id']);

exports.random = function () {
  var randomBeer = uniqueRandomArray(sortedDb);

  return [randomBeer()];
};

exports.beer = function (id) {
  var chosenBeer = idFilter(id, sortedDb);

  return chosenBeer;
};

exports.beers = function () {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  return filters(sortedDb, options);
};