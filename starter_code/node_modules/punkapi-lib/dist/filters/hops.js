'use strict';

var filter = require('lodash/filter');
var curry = require('lodash/curry');

var _require = require('../helpers/stringMatch'),
    stringFuzzyMatch = _require.stringFuzzyMatch;

function hopsFilter(val, db) {
  if (val == null) return db;
  return filter(db, function (b) {
    return b.ingredients.hops.some(function (o) {
      return stringFuzzyMatch(o.name, val);
    });
  });
}

module.exports = curry(hopsFilter);